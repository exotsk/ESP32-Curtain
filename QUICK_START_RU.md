# –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –®—Ç–æ—Ä ESP32 - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ë—ã—Å—Ç—Ä–æ–≥–æ –°—Ç–∞—Ä—Ç–∞

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –ú–∏–Ω—É—Ç)

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WiFi –∏ MQTT
–û—Ç–∫—Ä–æ–π—Ç–µ `src/CurtainsESP32.ino` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 58):

```cpp
const char* WIFI_SSID = "Your SSID";           // ‚Üê –ò–º—è –≤–∞—à–µ–π WiFi —Å–µ—Ç–∏
const char* WIFI_PASSWORD = "Your Password";    // ‚Üê –ü–∞—Ä–æ–ª—å WiFi
const char* MQTT_SERVER = "Your mqtt server";   // ‚Üê IP –≤–∞—à–µ–≥–æ MQTT –±—Ä–æ–∫–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "192.168.1.100")
```

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ ESP32
```bash
platformio run --target upload
```

### –®–∞–≥ 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –í—ã–≤–æ–¥–∞ Serial
```bash
platformio device monitor
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
ESP32 Curtain Controller Starting...
Watchdog timer enabled
Limit switches configured
Connecting to WiFi...
WiFi connected!
IP address: 192.168.1.XXX
MQTT configured
Steppers configured
Setup complete!
```

### –®–∞–≥ 4: –¢–µ—Å—Ç –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ MQTT

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–æ–∑–∏—Ü–∏–µ–π –®—Ç–æ—Ä—ã
```bash
# –û—Ç–∫—Ä—ã—Ç—å —à—Ç–æ—Ä—É 1 (–ø–æ–∑–∏—Ü–∏—è 0)
mosquitto_pub -h –í–ê–®_MQTT_IP -t /CURTAINS/ROLL1/ -m "0"

# –ó–∞–∫—Ä—ã—Ç—å —à—Ç–æ—Ä—É 1 (–ø–æ–∑–∏—Ü–∏—è 550)
mosquitto_pub -h –í–ê–®_MQTT_IP -t /CURTAINS/ROLL1/ -m "550"

# –ü–æ–ª—É–æ—Ç–∫—Ä—ã—Ç–∞—è —à—Ç–æ—Ä–∞ 1 (–ø–æ–∑–∏—Ü–∏—è 275)
mosquitto_pub -h –í–ê–®_MQTT_IP -t /CURTAINS/ROLL1/ -m "275"

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à—Ç–æ—Ä–æ–π 2
mosquitto_pub -h –í–ê–®_MQTT_IP -t /CURTAINS/ROLL2/ -m "275"
```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –û–±–Ω–æ–≤–ª–µ–Ω–∏–π –ü–æ–∑–∏—Ü–∏–∏
```bash
mosquitto_sub -h –í–ê–®_MQTT_IP -t /CURTAINS/#
```

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è

### –î–≤–∏–≥–∞—Ç–µ–ª—å 1 (–®—Ç–æ—Ä–∞ 1)
- **–ü–∏–Ω—ã –î–≤–∏–≥–∞—Ç–µ–ª—è**: GPIO 32, 25, 33, 26
- **–í–µ—Ä—Ö–Ω–∏–π –ö–æ–Ω—Ü–µ–≤–∏–∫**: GPIO 17 (–∞–∫—Ç–∏–≤–Ω—ã–π LOW)
- **–ù–∏–∂–Ω–∏–π –ö–æ–Ω—Ü–µ–≤–∏–∫**: GPIO 16 (–∞–∫—Ç–∏–≤–Ω—ã–π LOW)

### –î–≤–∏–≥–∞—Ç–µ–ª—å 2 (–®—Ç–æ—Ä–∞ 2)
- **–ü–∏–Ω—ã –î–≤–∏–≥–∞—Ç–µ–ª—è**: GPIO 23, 21, 22, 19
- **–í–µ—Ä—Ö–Ω–∏–π –ö–æ–Ω—Ü–µ–≤–∏–∫**: GPIO 14 (–∞–∫—Ç–∏–≤–Ω—ã–π LOW)
- **–ù–∏–∂–Ω–∏–π –ö–æ–Ω—Ü–µ–≤–∏–∫**: GPIO 12 (–∞–∫—Ç–∏–≤–Ω—ã–π LOW)

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ö–æ–Ω—Ü–µ–≤—ã—Ö –í—ã–∫–ª—é—á–∞—Ç–µ–ª–µ–π
```
–í—ã–∫–ª—é—á–∞—Ç–µ–ª—å ‚Üí GPIO –ü–∏–Ω
–í—ã–∫–ª—é—á–∞—Ç–µ–ª—å ‚Üí GND
(–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–æ–¥—Ç—è–∂–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞, –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å —Ç—è–Ω–µ—Ç –ø–∏–Ω –∫ LOW –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏)
```

---

## üì° –¢–æ–ø–∏–∫–∏ MQTT

### –¢–æ–ø–∏–∫–∏ –ö–æ–º–∞–Ω–¥ (–ü–æ–¥–ø–∏—Å–∫–∞)
- `/CURTAINS/ROLL1/` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–µ–π —à—Ç–æ—Ä—ã 1
- `/CURTAINS/ROLL2/` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–µ–π —à—Ç–æ—Ä—ã 2

**–§–æ—Ä–º–∞—Ç –ó–Ω–∞—á–µ–Ω–∏—è**: –¶–µ–ª–æ–µ —á–∏—Å–ª–æ 0-550 (—É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ 100 –≤–Ω—É—Ç—Ä–∏ –¥–ª—è —à–∞–≥–æ–≤)

### –¢–æ–ø–∏–∫–∏ –°—Ç–∞—Ç—É—Å–∞ (–ü—É–±–ª–∏–∫–∞—Ü–∏—è)
- `/CURTAINS/ROLL1_step/` - –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è —à—Ç–æ—Ä—ã 1
- `/CURTAINS/ROLL2_step/` - –¢–µ–∫—É—â–∞—è –ø–æ–∑–∏—Ü–∏—è —à—Ç–æ—Ä—ã 2

**–§–æ—Ä–º–∞—Ç –ó–Ω–∞—á–µ–Ω–∏—è**: –¶–µ–ª–æ–µ —á–∏—Å–ª–æ 0-550 (retained —Å–æ–æ–±—â–µ–Ω–∏–µ)

---

## üè† –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Home Assistant

### configuration.yaml
```yaml
mqtt:
  cover:
    - name: "–®—Ç–æ—Ä–∞ –≤ –≥–æ—Å—Ç–∏–Ω–æ–π 1"
      command_topic: "/CURTAINS/ROLL1/"
      position_topic: "/CURTAINS/ROLL1_step/"
      set_position_topic: "/CURTAINS/ROLL1/"
      position_open: 0
      position_closed: 550
      payload_open: "0"
      payload_close: "550"
      optimistic: false
      qos: 0
      retain: true
      
    - name: "–®—Ç–æ—Ä–∞ –≤ –≥–æ—Å—Ç–∏–Ω–æ–π 2"
      command_topic: "/CURTAINS/ROLL2/"
      position_topic: "/CURTAINS/ROLL2_step/"
      set_position_topic: "/CURTAINS/ROLL2/"
      position_open: 0
      position_closed: 550
      payload_open: "0"
      payload_close: "550"
      optimistic: false
      qos: 0
      retain: true
```

---

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ù–µ–ø–æ–ª–∞–¥–æ–∫

### WiFi –ù–µ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å SSID –∏ –ø–∞—Ä–æ–ª—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ —Å–µ—Ç—å 2.4–ì–ì—Ü (ESP32 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 5–ì–ì—Ü)
3. –°–ª–µ–¥–∏—Ç–µ –∑–∞ Serial –º–æ–Ω–∏—Ç–æ—Ä–æ–º –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
4. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —á–µ—Ä–µ–∑ 20 —Å–µ–∫—É–Ω–¥ –ø—Ä–∏ —Å–±–æ–µ WiFi

### MQTT –ù–µ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP –∞–¥—Ä–µ—Å MQTT –±—Ä–æ–∫–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ MQTT –±—Ä–æ–∫–µ—Ä: `netstat -an | grep 1883`
3. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `MQTT_USER` –∏ `MQTT_PASS`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞
5. Serial –º–æ–Ω–∏—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –∫–æ–¥–∞–º–∏ –æ—à–∏–±–æ–∫

### –î–≤–∏–≥–∞—Ç–µ–ª—å –ù–µ –î–≤–∏–≥–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è –¥–≤–∏–≥–∞—Ç–µ–ª—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è GPIO –ø–∏–Ω–æ–≤
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ MQTT –∫–æ–º–∞–Ω–¥—É –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ Serial –º–æ–Ω–∏—Ç–æ—Ä–æ–º
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏ –ª–∏ –∫–æ–Ω—Ü–µ–≤—ã–µ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏
5. –î–≤–∏–≥–∞—Ç–µ–ª—å –æ—Ç–∫–ª—é—á–∏—Ç –≤—ã—Ö–æ–¥—ã –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ü–µ–≤–∏–∫–∞

### –ü–æ–∑–∏—Ü–∏—è –ù–µ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ MQTT (Serial –º–æ–Ω–∏—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "connected!")
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MQTT –±—Ä–æ–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
3. –ü–æ–∑–∏—Ü–∏—è –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mosquitto_sub -h –í–ê–®_IP -t /CURTAINS/#` –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –°–∏—Å—Ç–µ–º–∞ –ó–∞–≤–∏—Å–∞–µ—Ç
- –°—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Serial –º–æ–Ω–∏—Ç–æ—Ä –¥–ª—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–≤–∏—Å–∞–Ω–∏–µ–º
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–ª–æ–∫ –ø–∏—Ç–∞–Ω–∏—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–π

---

## üéõÔ∏è –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞
1. –í–∫–ª—é—á–∏—Ç–µ ESP32
2. –í—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —à—Ç–æ—Ä—ã –≤ –∑–∞–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
3. –ù–∞–∂–º–∏—Ç–µ –∫–æ–Ω—Ü–µ–≤–æ–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ MQTT –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤ –ø–æ–∑–∏—Ü–∏—é 550
5. –ï—Å–ª–∏ —à—Ç–æ—Ä–∞ –Ω–µ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É `CURTAIN_MAXIMUM`
6. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤ –ø–æ–∑–∏—Ü–∏—é 0
7. –ù–∞–∂–º–∏—Ç–µ –∫–æ–Ω—Ü–µ–≤–æ–π –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ü–æ–∑–∏—Ü–∏–∏
–í `CurtainsESP32.ino` –∏–∑–º–µ–Ω–∏—Ç–µ:
```cpp
#define CURTAIN_MAXIMUM 550  // –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ
```
–ë–æ–ª—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ = –±–æ–ª—å—à–µ —à–∞–≥–æ–≤ = –±–æ–ª—å—à–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –°–∫–æ—Ä–æ—Å—Ç–∏
```cpp
stepper1.setMaxSpeed(600);        // –£–≤–µ–ª–∏—á—å—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
stepper1.setAcceleration(300);    // –£–≤–µ–ª–∏—á—å—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è
```

---

## üîê –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è MQTT

–ï—Å–ª–∏ –≤–∞—à MQTT –±—Ä–æ–∫–µ—Ä —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é:

```cpp
const char* MQTT_USER = "–≤–∞—à–µ_–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è";
const char* MQTT_PASS = "–≤–∞—à_–ø–∞—Ä–æ–ª—å";
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –í—ã–≤–æ–¥–∞ Serial –ú–æ–Ω–∏—Ç–æ—Ä–∞

### –ù–æ—Ä–º–∞–ª—å–Ω–∞—è –†–∞–±–æ—Ç–∞
```
ESP32 Curtain Controller Starting...
Watchdog timer enabled
Limit switches configured
Connecting to WiFi...
WiFi connected!
IP address: 192.168.1.50
Attempting MQTT connection...connected!
Subscribed to: /CURTAINS/ROLL1/
Subscribed to: /CURTAINS/ROLL2/
MQTT configured
Steppers configured
Setup complete!

Stepper 1 -> 275.00
Upper limit reached
Stepper 2 -> 100.00
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
```
Attempting MQTT connection...failed, rc=-2
Next retry in: 5s
Attempting MQTT connection...failed, rc=-2
Next retry in: 10s
```

**–ö–æ–¥—ã –û—à–∏–±–æ–∫**:
- `-2`: MQTT_CONNECT_FAILED (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ IP –±—Ä–æ–∫–µ—Ä–∞)
- `-4`: MQTT_CONNECTION_TIMEOUT (–ø—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ç—å—é)
- `5`: MQTT_CONNECTION_LOST (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ WiFi)

---

## ‚öôÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –¢–æ–ø–∏–∫–æ–≤ MQTT
```cpp
const char* MQTT_STEP1 = "/CURTAINS/ROLL1/";      // –í–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–æ–ø–∏–∫
const char* PUB_STEPS1 = "/CURTAINS/ROLL1_step/"; // –í–∞—à —Ç–æ–ø–∏–∫ —Å—Ç–∞—Ç—É—Å–∞
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ó–æ–Ω –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```cpp
#define STOP_HYSTERESIS 5  // –ú—ë—Ä—Ç–≤–∞—è –∑–æ–Ω–∞ –≤–æ–∫—Ä—É–≥ –∫–æ–Ω—Ü–µ–≤–∏–∫–æ–≤ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—Ä–µ–±–µ–∑–≥)
```

### –¢–∞–π–º–∞—É—Ç –°—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ –¢–∞–π–º–µ—Ä–∞
```cpp
#define WATCHDOG_TIMEOUT_S 10  // –°–µ–∫—É–Ω–¥—ã –¥–æ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
```

### –¢–∞–π–º–∞—É—Ç –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è WiFi
```cpp
#define WIFI_CONNECT_TIMEOUT_MS 20000  // –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –¥–æ –æ—Ç–∫–∞–∑–∞
```

---

## üìà –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –æ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- **–í—Ä–µ–º—è –û—Ç–∫–ª–∏–∫–∞**: < 100–º—Å –æ—Ç MQTT –∫–æ–º–∞–Ω–¥—ã –¥–æ –∑–∞–ø—É—Å–∫–∞ –¥–≤–∏–≥–∞—Ç–µ–ª—è
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ü–æ–∑–∏—Ü–∏–∏**: –ü—É–±–ª–∏–∫—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ (—Å–Ω–∏–∂–∞–µ—Ç MQTT —Ç—Ä–∞—Ñ–∏–∫)
- **–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ (5—Å ‚Üí 10—Å ‚Üí 20—Å ‚Üí –º–∞–∫—Å 30—Å)
- **–ó–∞—â–∏—Ç–∞ –°—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ –¢–∞–π–º–µ—Ä–∞**: –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏ > 10 —Å–µ–∫—É–Ω–¥
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ü–∞–º—è—Ç–∏**: ~45–ö–ë –ø—Ä–æ–≥—Ä–∞–º–º–∞ / ~10–ö–ë RAM

---

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

1. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å `OPTIMIZATION_NOTES_RU.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
2. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ Serial –º–æ–Ω–∏—Ç–æ—Ä–∞ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ MQTT –±—Ä–æ–∫–µ—Ä –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

---

## üìù –ö–ª—é—á–µ–≤—ã–µ –£–ª—É—á—à–µ–Ω–∏—è –ø–æ –°—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –û—Ä–∏–≥–∏–Ω–∞–ª–æ–º

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞** –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è 1  
‚úÖ **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ MQTT** –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ  
‚úÖ **–°—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è  
‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã  
‚úÖ **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** —Å –æ—Ç–ª–∞–¥–∫–æ–π —á–µ—Ä–µ–∑ Serial  
‚úÖ **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞** –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏  
‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞** - –ø—Ä–æ—â–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å  
‚úÖ **–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ WiFi** - –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  

---

**–ì–æ—Ç–æ–≤—ã –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏? –ü—Ä–∏—è—Ç–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à—Ç–æ—Ä–∞–º–∏! üéâ**
